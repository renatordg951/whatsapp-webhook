var insiderProfile={setup:function(){},frequentTravelerCustom:function(e,f){var b="";
var h="";
var a=-1;
var d=false;
if(!jQuery.isEmptyObject(e)&&!jQuery.isEmptyObject(e.frequentTravelerPrefList)&&!jQuery.isEmptyObject(e.frequentTravelerPrefList[0])){$.each(e.frequentTravelerPrefList,function(l,n){var m="";
var j="";
var k="";
b+="<li>";
b+='<span class="program-name">'+n.programName+"</span>";
b+=" (#"+n.accountNumber+")";
b+=m;
b+="</li>";
a++;
h+='<li class="partner-preference-data"><div><select id= "insiderFrequentTravelerProgram['+a+'].loyaltyProgram"  name="insiderFrequentTravelerProgram['+a+'].loyaltyProgram">'+frequentTravelerPartnerOptions+'</select> <input id="insiderFrequentTravelerProgram['+a+'].accountNumber" name="insiderFrequentTravelerProgram['+a+'].accountNumber" type="text" value="'+n.accountNumber+'"><a href="#" role="button" class="trash">'+f.labels.deleteLinkTitle+"</a>"+j+'<input type="radio" name="primary" value="primary'+a+'" id='+f.formId+"_frequentTraveler-primary"+a+' class="checkbox"'+k+"></div></li>"
});
$(f.formId+"_frequentTraveler-editable .partner-preference").html(h);
$("section .insiderFrequentTraveler fieldset p:empty").hide();
var g=0;
$.each(e.frequentTravelerPrefList,function(j,l){var k=$(".partner-preference-data select[name='insiderFrequentTravelerProgram["+g+"].loyaltyProgram']");
k.val(l.code);
if(l.primary==true){$(f.formId+"_frequentTraveler-primary"+g).attr("checked","checked")
}g++
});
$(f.formId+"_frequentTraveler-readonly").removeClass("hide-fieldset")
}else{var i=$("select[name='insiderFrequentTravelerProgram[0].loyaltyProgram']");
i.append(frequentTravelerPartnerOptions);
$(f.formId+"_frequentTraveler-setnow").removeClass("hide-fieldset")
}var c=$(f.formId+"_frequentTraveler-editable li").length;
if(c===5){$(".add-loyalty").hide()
}$(".add-loyalty").die().live("click",function(){var j=$(f.formId+"_frequentTraveler-editable .partner-preference-data").length;
if(j<5){j++;
var l=Number(j-1);
var k="";
if(j>1){k='<span class="primary-label hide-label">'+f.labels.primaryLabel+"</span>";
k+='<a href="#" role="button" class="make-primary" id='+f.formId+"_frequentTraveler-make-primary"+l+">"+f.labels.makePrimary+"</a>";
k+='<input type="radio" class="checkbox" id='+f.formId+"_frequentTraveler-primary"+l+' value="primary'+l+'" name="primary">'
}var m='<li class="partner-preference-data"><div><select name="insiderFrequentTravelerProgram['+l+'].loyaltyProgram" id="insiderFrequentTravelerProgram['+l+'].loyaltyProgram">'+frequentTravelerPartnerOptions+'</select> <input type="text" value="" name="insiderFrequentTravelerProgram['+l+'].accountNumber" id="insiderFrequentTravelerProgram['+l+'].accountNumber"><a href="#" role="button" class="trash">'+f.labels.deleteLinkTitle+"</a>"+k+"</div></li>";
$(f.formId+"_frequentTraveler-editable .partner-preference").append(m);
j===5?$(this).hide():$(this).show()
}return false
});
$(".trash").live("click",function(j){j.preventDefault();
$(this).parents("li").remove();
c--;
c<5?$(".add-loyalty").show():$(".add-loyalty").hide();
$(".partner-preference-data").each(function(k){$(this).find("label").attr("for","primary"+k);
$(this).find(".checkbox").attr({id:"primary"+k,value:"primary"+k});
$(this).find(":text").attr("name","insiderFrequentTravelerProgram["+k+"].accountNumber");
$(this).find("select").attr("name","insiderFrequentTravelerProgram["+k+"].loyaltyProgram")
});
return false
});
$(".make-primary").live("click",function(j){$(".partner-preference-data .checked:checked").prop("checked",false);
$(this).next("input:radio").prop("checked",true);
$(".current-primary").next(".make-primary").removeClass("hide-label");
$(".current-primary").removeClass("current-primary").addClass("hide-label");
$(this).prev(".primary-label").addClass("current-primary").removeClass("hide-label");
$(this).addClass("hide-label");
return false
})
}};
var modal;
var modal_outer;
var content;
var mask;
var _this=this;
var lastPageFocus;
var $modalTabElements=[];
var currentModalTabIndex=0;
var pageScrollTop;
$(function(){modal=$("div#modal");
modal_outer=$("#modal-outer");
content=$("#modal div.content");
mask=document.createElement("DIV");
pageScrollTop=0;
mask.id="mask";
if(!document.getElementById("mask")){document.body.appendChild(mask)
}$(".modal").live("click",function(){lastPageFocus=$(this);
var a=$(this).attr("href");
var b=$(this).attr("id");
if(!(b=="viewButton"&&$("select.modal-dd option:selected").val()=="")){$("input[name='temp']").val($(this).attr("data-sipp"));
$(this).blur();
initModal($(this).attr("data-modal"),$(this).attr("data-ajax"),a,$(this).attr("data-close"))
}return false
});
$("#modal-outer .submit").live("click",function(){setTimeout(function(){$("#top p.error").css("display","none")
},100)
});
$("select.modal-dd").live("change",function(){var b=$(this).get(0).options[$(this).get(0).selectedIndex];
var a=$(this).val();
$("#viewButton").attr("data-modal",b.getAttribute("data-modal"));
$("#viewButton").attr("data-ajax",b.getAttribute("data-ajax"));
$("input[name='temp']").val(b.getAttribute("data-sipp"));
$("#viewButton").attr("data-sipp",b.getAttribute("data-sipp"));
$("#viewButton").attr("href",a)
});
$("#modal p.closer, #mask, a.close").live("click",function(a){a.cancelBubble=true;
hideModal();
return false
});
$("#modal .countryOfResidence input[type=checkbox]").live("click",function(){$("#modal .countryOfResidence div").toggleClass("hideCountry")
});
$(".hot-deals .countryOfResidence input[type=checkbox]").live("click",function(){$(".hot-deals .countryOfResidence div").toggleClass("hideCountry")
});
$("#modal .content :tabbable, #modal .closer .close").live("click",function(){currentModalTabIndex=$(this).attr("modal-tab-index")
});
$('#modal input[type="checkbox"]').live("change",function(){setModalTabElements();
currentModalTabIndex=$(this).attr("modal-tab-index");
$(this).trigger("focus")
});
$("select.modal-dd").trigger("change")
});
$(document).keydown(function(b){var a=b.keyCode||b.which;
if(a===9&&$("#modal-outer").is(":visible")){b.preventDefault();
setModalInputFocus(b.shiftKey)
}else{if(a==27){hideModal()
}}});
function initModal(c,b,a,d){assignCSS(c,d);
handleAJAX(b,a)
}var getParametersMap=function(a){var d={};
if(!a){return d
}if(a.indexOf("?")==-1){return d
}var f=a.substring(a.indexOf("?")+1);
var h=f.split("&");
for(var c=0;
c<h.length;
c++){var e=h[c].split("=",2);
var b=decodeURIComponent(e[0]);
var g="";
if(e.length==2){g=decodeURIComponent(e[1])
}d[b]=g
}return d
};
function assignCSS(b,a){if(b){if(a){modal.attr("class","modal-"+b+" "+a)
}else{modal.attr("class","modal-"+b)
}}else{modal.attr("class","modal-sm")
}}function handleAJAX(b,a){if(b=="true"){content.empty();
$.ajax({url:a,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(){modal.addClass("loading")
},success:function(c){modal.removeClass("loading");
content.html(c);
handleRequestParameters(a);
showModal()
}})
}else{content.empty().html($(a).html());
handleRequestParameters(a);
showModal()
}}function handleRequestParameters(a){var c=getParametersMap(a);
for(key in c){var b=$(content).find("input[name='"+key+"']");
$(b).val(c[key])
}}function showModal(){var b=modalScrollTop();
pageScrollTop=b;
$("#modal, #mask, #modal-outer").show();
setModalWCAGProperties();
$("#printReservation").addClass("hideModal");
if($("a.printModal").length){$("div.content.parsys, div.parsys.contentTop, div.parsys_column, div.parsys.contentBottom").addClass("hideFromPrint")
}var a=$(".content-wrapper").outerWidth();
$(".content-wrapper").addClass("content-modal").css({top:-pageScrollTop,width:a,left:"50%","margin-left":-(a/2)});
window.setTimeout(setModalTabElements,100);
addModalChangeListeners()
}function hideModal(){removeModalChangeListeners();
$("#modal, #mask, #modal-outer").hide();
$(".content-wrapper").removeClass("content-modal").css({top:0,width:"auto",left:0,"margin-left":0});
$("#printReservation").removeClass("hideModal");
$("div.parsys.contentTop, div.parsys_column, div.parsys.contentBottom").removeClass("hideFromPrint");
positionWindowScrollTop();
if(lastPageFocus){lastPageFocus.trigger("focus")
}$modalTabElements=[];
return false
}function setModalTabElements(a){$modalTabElements=[];
currentModalTabIndex=a||0;
$modalTabElements=$("#modal .content").find(":tabbable:not([disabled])");
if($("#modal > .closeLinkText").is(":visible")){$modalTabElements.push($("#modal > .closeLinkText")[0])
}$modalTabElements.push($("#modal .closer :tabbable")[0]);
$.each($modalTabElements,function(d,e){if($(e).attr("name")==="password"&&$("#modal input[modal-tab-index='"+(d-1)+"']").attr("name")==="rememberMe"){var c=$modalTabElements[d];
$modalTabElements[d]=$modalTabElements[d-1];
$modalTabElements[d-1]=c;
$($modalTabElements[d]).attr("modal-tab-index",d);
$($modalTabElements[d-1]).attr("modal-tab-index",d-1)
}else{$(e).attr("modal-tab-index",d)
}});
$($modalTabElements[currentModalTabIndex]).trigger("focus")
}function setModalInputFocus(a){if($modalTabElements.length>1){if(a){if($($modalTabElements[0]).is(":focus")){currentModalTabIndex=$modalTabElements.length-1;
$($modalTabElements[currentModalTabIndex]).trigger("focus")
}else{$($modalTabElements[--currentModalTabIndex]).trigger("focus")
}}else{if($($modalTabElements[$modalTabElements.length-1]).is(":focus")){currentModalTabIndex=0;
$($modalTabElements[currentModalTabIndex]).trigger("focus")
}else{$($modalTabElements[++currentModalTabIndex]).trigger("focus")
}}}}function addModalChangeListeners(){$(document).bind("ajaxGetComplete",function(a){setModalTabElements(currentModalTabIndex)
})
}function removeModalChangeListeners(){$(document).unbind("ajaxGetComplete")
}function setModalWCAGProperties(){var b=$("#modal-outer");
var d=b.find("h1")[0]||b.find("h2")[0];
var c="modal-title";
if(d){var a=$(d).attr("id");
if(typeof a!==typeof undefined&&a!==false){c=a
}else{$(d).attr("id",c)
}}if(b){b.attr("aria-labelledby",c)
}}function positionWindowScrollTop(){var a;
a=pageScrollTop;
if(!isNaN(a)){document.body.scrollTop=a;
document.documentElement.scrollTop=a
}}function modalScrollTop(){return filterModalScrollTop(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)
}function filterModalScrollTop(d,b,a){var c=d?d:0;
if(b&&(!c||(c>b))){c=b
}return a&&(!c||(c>a))?a:c
}this.emailPromotionsOptOutForCAuser=ko.observable(true);
this.emailPromotionsOptOutForCAuserHandler=function(){_this.emailPromotionsOptOutForCAuser(false)
};
var CityLocations=function(a){this.allCities=ko.observable(a.allCities);
this.forwardUrl=null==a.forwardUrl?null:ko.observable(a.forwardUrl);
this.isForwardUrlExists(null==a.forwardUrl?false:true);
this.countryCode=ko.observable(a.locationCountryModel.value)
};
var BuildCities=function(){var a="";
if(isForwardUrlExists()){a=$("#driveAllianceText").html()+'<p><a href="'+forwardUrl()+'"   class="bigBluePointer">'+driveAllianceButtonLabel+"</a></p>";
this.showFilter(false)
}else{this.showFilter(true);
a="<dl>";
if(!allCities()){return serverErrorText
}$.each(allCities(),function(c,b){a+='<dt><a id="'+c+'">'+c+"</a></dt>";
$.each(b,function(f,e){var g;
if(null==e.stateProvinceAbbreviation){g=e.countryCode
}else{g=e.stateProvinceAbbreviation
}var d=e.cityName+", "+g+" - "+e.locationName;
if(e.airportCode){d+=" ("+e.airportCode+")"
}var h="('"+JSEncode(d)+"' , "+e.peopleSoftId+")";
a+='<dd><a href="#" title="'+d+'" class="close" onclick="selectedLocation '+h+'; return false;" >'+d+"</a></dd>"
})
});
a+="</dl>"
}return a
};
var BuildFilters=function(b){var a=b;
if(!allCities()){return""
}$.each(allCities(),function(d,c){if(d==b){a='<a href="#'+b+'">'+b+"</a>";
return(d==b)
}});
return a
};
var selectedLocation=function(a,b){a=decodeURI(a);
if(selectedLocationLink=="pickup"){$("input[name='pickUpLocation.searchCriteria']").val(a);
$("input[name='pickUpLocation.peopleSoftId']").val(b);
$("select[name='pickUpLocation.bookingCountry']").val(countryCode())
}else{if(selectedLocationLink=="dropoff"){$("input[name='dropOffLocation.searchCriteria']").val(a);
$("input[name='dropOffLocation.peopleSoftId']").val(b)
}}};
function JSEncode(a){if(a!==null){return encodeURI(a).replace(/'/g,"%27")
}return a
}var RegionCountries=function(c){this.defaultRegionCode=ko.observable(c.defaultRegionCode);
this.defaultCountryCode=ko.observable(c.defaultCountryCode);
this.regions=ko.observable(c.regions);
this.showFilter=ko.observable(true);
var d;
$.each(regions(),function(f,g){if(g.regionCode==defaultRegionCode()){d=g;
return(g.regionCode==defaultRegionCode())
}});
this.selectedRegion=ko.observable(d);
this.selectedCountry=ko.observable();
this.selectedCountry=ko.observable();
var a=filterID;
var b=prepareForSuffix(getLocationByCountryURL());
this.isForwardUrlExists=ko.observable(false);
this.selectedCountry.subscribe(function(f){ko.cleanNode($("#"+a)[0]);
new ViewModel(b+"/value="+selectedCountry().countryCode+".json",CityLocations,a,{})
});
var e;
if(selectedRegion()){$.each(selectedRegion().countries,function(f,g){if(g.countryCode==defaultCountryCode()){e=g;
selectedCountry(e);
return(g.countryCode==defaultCountryCode())
}})
}};
var CountryMandatoryAddon=function(a){this.lacCountryAddonMsgHeading=a.lacCountryAddonMsgHeading;
this.lacCountryAddonMsgBody=a.lacCountryAddonMsgBody
};
var paymentTerms=function(a){this.redirectUrl=a.redirectUrl
};