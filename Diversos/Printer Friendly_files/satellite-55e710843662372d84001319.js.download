_satellite.pushAsyncScript(function(event, target, $variables){
  if (!Date.prototype.toISOString) {
  (function() {

    function pad(number) {
      if (number < 10) {
        return '0' + number;
      }
      return number;
    }

    Date.prototype.toISOString = function() {
      return this.getUTCFullYear() +
        '-' + pad(this.getUTCMonth() + 1) +
        '-' + pad(this.getUTCDate()) +
        'T' + pad(this.getUTCHours()) +
        ':' + pad(this.getUTCMinutes()) +
        ':' + pad(this.getUTCSeconds()) +
        '.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +
        'Z';
    };

  }());
}

$( document ).ajaxSend(function( event, request, settings ) {
  try{
  if(settings.url.indexOf('start/submit.sfx.json') !== -1){
    var q = {},
        u = decodeURIComponent(settings.data);
    u.replace(
        new RegExp("([^?=&]+)(=([^&]*))?", "g"),
        function($0, $1, $2, $3) { q[$1] = $3; }
    ); 
    //console.log( "settings " + decodeURIComponent(settings.data) );
    var pDate = q['pickUpDateTime.date'],
        dDate = q['dropOffDateTime.date'],
        pt = q['pickUpDateTime.time'].replace(/([0-9]{2})/, '$1:') + ':00',
        dt = q['dropOffDateTime.time'].replace(/([0-9]{2})/, '$1:') + ':00';
        
    pDate = new Date( q['pickUpDateTime.date'] ).toISOString().slice(0,10) + ' ' + pt;
    dDate = new Date( q['dropOffDateTime.date'] ).toISOString().slice(0,10) + ' ' + dt;
    //console.log( pDate );
    //console.log( dDate );
    _satellite.setCookie('_pickUpDate', pDate);
    _satellite.setCookie('_dropOffDate', dDate);
  }
  }catch(e){ }
});
});
